<!DOCTYPE HTML>
<html>

<head>
  <title>SpaceInvaders</title>
  <meta name="description" content="melonJS homepage" />
  <meta name="keywords" content="melonJS, HTML5, javascript, game, engine, framework" />
  <meta http-equiv="content-type" content="text/html; charset=windows-1252" />
  <link rel="stylesheet" type="text/css" href="/static/css/spaceinv.css" title="style" />
  <link rel="shortcut icon" href="/static/img/spaceinv/sp.ico">
</head>

<body>
    <div id="screen"></div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/melonJS-2.1.0.js"></script>
    
<!--     <script type="text/javascript" src="lib/plugins/debugPanel.js"></script> -->

    <script type="text/javascript" src="/static/js/spaceinv/game.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/resources.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/screens/play.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/screens/title.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/screens/end.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/screens/levelup.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/enemy.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/laser.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/player.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/enemy_manager.js"></script>
    <script type="text/javascript" src="/static/js/spaceinv/HUD.js"></script>

    <script type="text/javascript">
      
        /* Bootstrap */
        window.onReady(function onReady() {
            game.onload();
        });
      
      
        $(document).ready(function(){
          // initating local storage
          localStorage.spaceinvader_highscore = 0;
          localStorage.platformer_highscore = 0;
          
        });
        
//        function updatescore(){
//          $.getJSON('/update_highscore',{
//               platformer: localStorage.getItem('platformer_highscore'),
//               spaceinvader: localStorage.getItem('spaceinvader_highscore')
//            },
//            function(result) {
//               localStorage.spaceinvader_highscore = result.spaceinvader;
//               localStorage.platformer_highscore = result.platformer;
//            }        
//          );
//        };
        function updatescore(){
            $.ajax({
            type: 'POST',
            contentType: 'application/json',
            url: '/game/highscore/',
            dataType : 'json',
            data: {
              platformer : localStorage.getItem('platformer_highscore'), 
              spaceinvader : localStorage.getItem('spaceinvader_highscore')
            },
            success : function(result) {
              localStorage.spaceinvader_highscore = result.spaceinvader;
              localStorage.platformer_highscore = result.platformer;
            }
          });
        };
    </script>    
</body>
</html>
